This example covers the basic usage of iterating over utf8 text grapheme by grapheme.


\begin{DoxyCode}

\textcolor{preprocessor}{#include <experimental/string\_view>}
\textcolor{preprocessor}{#include <u5e/utf8\_string\_view.hpp>}
\textcolor{preprocessor}{#include <u5e/utf8\_string\_view\_grapheme.hpp>}
\textcolor{preprocessor}{#include <u5e/utf8\_string\_view\_grapheme\_iterator.hpp>}
\textcolor{preprocessor}{#include <stdio.h>}

\textcolor{keyword}{using} std::experimental::string\_view;
\textcolor{keyword}{using} \hyperlink{namespaceu5e_af5abb9026a8b93e2aadd01ee514208d3}{u5e::utf8\_string\_view};
\textcolor{keyword}{using} \hyperlink{namespaceu5e_a3255333e6ec6b7d9fd55a3937b445a9e}{u5e::utf8\_string\_view\_grapheme};
\textcolor{keyword}{using} \hyperlink{namespaceu5e_a3e36b87941b75a409fff1cae69b5bdb0}{u5e::utf8\_string\_view\_grapheme\_iterator};

\textcolor{keywordtype}{int} main(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} **argv) \{

  \textcolor{comment}{// for each argument}
  \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 1; i < argc; i++) \{

    \textcolor{comment}{// get a utf8\_string\_view}
    \hyperlink{namespaceu5e_af5abb9026a8b93e2aadd01ee514208d3}{utf8\_string\_view} p(argv[i]);

    \textcolor{comment}{// get the grapheme iterator from that}
    \textcolor{comment}{// Iterate grapheme by grapheme}
    \textcolor{keywordflow}{for} (utf8\_string\_view\_grapheme\_iterator gi = p.grapheme\_begin();
         gi != p.grapheme\_end(); gi++) \{
      \hyperlink{namespaceu5e_a3255333e6ec6b7d9fd55a3937b445a9e}{utf8\_string\_view\_grapheme} g = *gi;
      printf(\textcolor{stringliteral}{"["});

      \textcolor{comment}{// then iterate the codepoints inside that grapheme}
      \textcolor{keywordflow}{for} (utf8\_string\_view::const\_iterator it = g.codepoint\_begin();
           it != g.codepoint\_end(); it++ ) \{
        \textcolor{comment}{// the value dereferenced is the codepoint, not octets even if}
        \textcolor{comment}{// the original text had "wide" chars.}
        printf(\textcolor{stringliteral}{" U+%06llx"}, (\textcolor{keywordtype}{long} \textcolor{keywordtype}{long} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int})*it);
      \}

      printf(\textcolor{stringliteral}{" ]"});
    \}

    printf(\textcolor{stringliteral}{"\(\backslash\)n"});
  \}
  \textcolor{keywordflow}{return} 0;
\}
\end{DoxyCode}
 